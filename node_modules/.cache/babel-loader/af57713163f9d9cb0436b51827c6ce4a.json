{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _nodentRuntime = require('nodent-runtime');\n\nvar _nodentRuntime2 = _interopRequireDefault(_nodentRuntime);\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _domUtils = require('./domUtils');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar SearchElement = function () {\n  function SearchElement() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$handleSubmit = _ref.handleSubmit,\n        handleSubmit = _ref$handleSubmit === undefined ? function () {} : _ref$handleSubmit,\n        _ref$searchLabel = _ref.searchLabel,\n        searchLabel = _ref$searchLabel === undefined ? 'search' : _ref$searchLabel,\n        _ref$classNames = _ref.classNames,\n        classNames = _ref$classNames === undefined ? {} : _ref$classNames;\n\n    _classCallCheck(this, SearchElement);\n\n    var container = (0, _domUtils.createElement)('div', ['geosearch', classNames.container].join(' '));\n    var form = (0, _domUtils.createElement)('form', ['', classNames.form].join(' '), container);\n    var input = (0, _domUtils.createElement)('input', ['glass', classNames.input].join(' '), form);\n    input.type = 'text';\n    input.placeholder = searchLabel;\n    input.addEventListener('input', function (e) {\n      _this.onInput(e);\n    }, false);\n    input.addEventListener('keyup', function (e) {\n      _this.onKeyUp(e);\n    }, false);\n    input.addEventListener('keypress', function (e) {\n      _this.onKeyPress(e);\n    }, false);\n    input.addEventListener('focus', function (e) {\n      _this.onFocus(e);\n    }, false);\n    input.addEventListener('blur', function (e) {\n      _this.onBlur(e);\n    }, false);\n    this.elements = {\n      container: container,\n      form: form,\n      input: input\n    };\n    this.handleSubmit = handleSubmit;\n  }\n\n  _createClass(SearchElement, [{\n    key: 'onFocus',\n    value: function onFocus() {\n      (0, _domUtils.addClassName)(this.elements.form, 'active');\n    }\n  }, {\n    key: 'onBlur',\n    value: function onBlur() {\n      (0, _domUtils.removeClassName)(this.elements.form, 'active');\n    }\n  }, {\n    key: 'onSubmit',\n    value: function onSubmit(event) {\n      return new Promise(function ($return, $error) {\n        var _elements, input, container;\n\n        event.preventDefault();\n        event.stopPropagation();\n        _elements = this.elements, input = _elements.input, container = _elements.container;\n        (0, _domUtils.removeClassName)(container, 'error');\n        (0, _domUtils.addClassName)(container, 'pending');\n        return this.handleSubmit({\n          query: input.value\n        }).then(function ($await_1) {\n          (0, _domUtils.removeClassName)(container, 'pending');\n          return $return();\n        }.$asyncbind(this, $error), $error);\n      }.$asyncbind(this));\n    }\n  }, {\n    key: 'onInput',\n    value: function onInput() {\n      var container = this.elements.container;\n\n      if (this.hasError) {\n        (0, _domUtils.removeClassName)(container, 'error');\n        this.hasError = false;\n      }\n    }\n  }, {\n    key: 'onKeyUp',\n    value: function onKeyUp(event) {\n      var _elements2 = this.elements,\n          container = _elements2.container,\n          input = _elements2.input;\n\n      if (event.keyCode === _constants.ESCAPE_KEY) {\n        (0, _domUtils.removeClassName)(container, 'pending');\n        (0, _domUtils.removeClassName)(container, 'active');\n        input.value = '';\n        document.body.focus();\n        document.body.blur();\n      }\n    }\n  }, {\n    key: 'onKeyPress',\n    value: function onKeyPress(event) {\n      if (event.keyCode === _constants.ENTER_KEY) {\n        this.onSubmit(event);\n      }\n    }\n  }, {\n    key: 'setQuery',\n    value: function setQuery(query) {\n      var input = this.elements.input;\n      input.value = query;\n    }\n  }]);\n\n  return SearchElement;\n}();\n\nexports.default = SearchElement;","map":{"version":3,"sources":["/home/thomas/Map-interactive/node_modules/leaflet-geosearch/lib/searchElement.js"],"names":["Object","defineProperty","exports","value","_nodentRuntime","require","_nodentRuntime2","_interopRequireDefault","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_domUtils","_constants","obj","__esModule","default","_classCallCheck","instance","TypeError","SearchElement","_this","_ref","arguments","undefined","_ref$handleSubmit","handleSubmit","_ref$searchLabel","searchLabel","_ref$classNames","classNames","container","createElement","join","form","input","type","placeholder","addEventListener","e","onInput","onKeyUp","onKeyPress","onFocus","onBlur","elements","addClassName","removeClassName","onSubmit","event","Promise","$return","$error","_elements","preventDefault","stopPropagation","query","then","$await_1","$asyncbind","hasError","_elements2","keyCode","ESCAPE_KEY","document","body","focus","blur","ENTER_KEY","setQuery"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _nodentRuntime = require('nodent-runtime');\n\nvar _nodentRuntime2 = _interopRequireDefault(_nodentRuntime);\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _domUtils = require('./domUtils');\n\nvar _constants = require('./constants');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SearchElement = function () {\n  function SearchElement() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$handleSubmit = _ref.handleSubmit,\n        handleSubmit = _ref$handleSubmit === undefined ? function () {} : _ref$handleSubmit,\n        _ref$searchLabel = _ref.searchLabel,\n        searchLabel = _ref$searchLabel === undefined ? 'search' : _ref$searchLabel,\n        _ref$classNames = _ref.classNames,\n        classNames = _ref$classNames === undefined ? {} : _ref$classNames;\n\n    _classCallCheck(this, SearchElement);\n\n    var container = (0, _domUtils.createElement)('div', ['geosearch', classNames.container].join(' '));\n    var form = (0, _domUtils.createElement)('form', ['', classNames.form].join(' '), container);\n    var input = (0, _domUtils.createElement)('input', ['glass', classNames.input].join(' '), form);\n\n    input.type = 'text';\n    input.placeholder = searchLabel;\n\n    input.addEventListener('input', function (e) {\n      _this.onInput(e);\n    }, false);\n    input.addEventListener('keyup', function (e) {\n      _this.onKeyUp(e);\n    }, false);\n    input.addEventListener('keypress', function (e) {\n      _this.onKeyPress(e);\n    }, false);\n    input.addEventListener('focus', function (e) {\n      _this.onFocus(e);\n    }, false);\n    input.addEventListener('blur', function (e) {\n      _this.onBlur(e);\n    }, false);\n\n    this.elements = { container: container, form: form, input: input };\n    this.handleSubmit = handleSubmit;\n  }\n\n  _createClass(SearchElement, [{\n    key: 'onFocus',\n    value: function onFocus() {\n      (0, _domUtils.addClassName)(this.elements.form, 'active');\n    }\n  }, {\n    key: 'onBlur',\n    value: function onBlur() {\n      (0, _domUtils.removeClassName)(this.elements.form, 'active');\n    }\n  }, {\n    key: 'onSubmit',\n    value: function onSubmit(event) {\n      return new Promise(function ($return, $error) {\n        var _elements, input, container;\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        _elements = this.elements, input = _elements.input, container = _elements.container;\n\n        (0, _domUtils.removeClassName)(container, 'error');\n        (0, _domUtils.addClassName)(container, 'pending');\n\n        return this.handleSubmit({ query: input.value }).then(function ($await_1) {\n          (0, _domUtils.removeClassName)(container, 'pending');\n          return $return();\n        }.$asyncbind(this, $error), $error);\n      }.$asyncbind(this));\n    }\n  }, {\n    key: 'onInput',\n    value: function onInput() {\n      var container = this.elements.container;\n\n\n      if (this.hasError) {\n        (0, _domUtils.removeClassName)(container, 'error');\n        this.hasError = false;\n      }\n    }\n  }, {\n    key: 'onKeyUp',\n    value: function onKeyUp(event) {\n      var _elements2 = this.elements,\n          container = _elements2.container,\n          input = _elements2.input;\n\n\n      if (event.keyCode === _constants.ESCAPE_KEY) {\n        (0, _domUtils.removeClassName)(container, 'pending');\n        (0, _domUtils.removeClassName)(container, 'active');\n\n        input.value = '';\n\n        document.body.focus();\n        document.body.blur();\n      }\n    }\n  }, {\n    key: 'onKeyPress',\n    value: function onKeyPress(event) {\n      if (event.keyCode === _constants.ENTER_KEY) {\n        this.onSubmit(event);\n      }\n    }\n  }, {\n    key: 'setQuery',\n    value: function setQuery(query) {\n      var input = this.elements.input;\n\n      input.value = query;\n    }\n  }]);\n\n  return SearchElement;\n}();\n\nexports.default = SearchElement;"]},"metadata":{},"sourceType":"script"}