{"ast":null,"code":"import _slicedToArray from \"/home/thomas/Map-interactive/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/thomas/Map-interactive/src/components/MakeRepere.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Map as LeafletMap, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\nimport './Mak.css';\n\nconst MappingClient = () => {\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        results = _useState2[0],\n        setResults = _useState2[1];\n\n  const _useState3 = useState([47.9027336, 1.9086066]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        pos = _useState4[0],\n        setPos = _useState4[1];\n\n  const _useState5 = useState([47.9027336, 1.9086066]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        posStart = _useState6[0],\n        setPosStart = _useState6[1];\n\n  const _useState7 = useState([47.9027336, 1.9086066]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        posEnd = _useState8[0],\n        setPosEnd = _useState8[1];\n\n  const provider = new OpenStreetMapProvider();\n\n  const _useState9 = useState(6),\n        _useState10 = _slicedToArray(_useState9, 2),\n        zooming = _useState10[0],\n        setZooming = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        inputValue = _useState12[0],\n        setInputValue = _useState12[1];\n\n  const _useState13 = useState(1),\n        _useState14 = _slicedToArray(_useState13, 2),\n        validPosition = _useState14[0],\n        setValidPosition = _useState14[1];\n\n  const _useState15 = useState(0),\n        _useState16 = _slicedToArray(_useState15, 2),\n        adressEnter = _useState16[0],\n        setAdressEnter = _useState16[1];\n\n  const validPos = () => {\n    setAdressEnter(adressEnter + 1);\n    setValidPosition(null);\n    console.log(adressEnter);\n  };\n\n  const validEnter = () => {\n    setValidPosition(2);\n    setAdressEnter(null);\n  };\n\n  const takeAdress = async event => {\n    event.preventDefault();\n    setInputValue(event.currentTarget[0].value);\n    const result = await giveMeCoords(inputValue);\n    const resultFr = result.filter(res => ++res.y > 42.5 && ++res.y < 51 && ++res.x < 8 && ++res.x > -5);\n    setResults(resultFr);\n  };\n\n  const onMapClick = async e => {\n    let position = [e.latlng.lat, e.latlng.lng];\n    setPos(position);\n\n    if (validPosition === 1) {\n      setPosStart(position);\n    } else if (validPosition === 2) {\n      setPosEnd(position);\n    }\n  };\n\n  const putMarker = async event => {\n    event.preventDefault();\n    const adress = event.target.innerHTML;\n    const result = await giveMeCoords(adress);\n    const coords = [+result[0].y, +result[0].x];\n    setPos([...coords]);\n    setResults({});\n    await setTimeout(function () {\n      if (result[0].raw.type === \"city\") {\n        setZooming(14);\n      } else if (result[0].raw.type) {\n        setZooming(15);\n      }\n    }, 1500);\n  };\n\n  const giveMeCoords = async adress => {\n    // console.log(adress)\n    return await provider.search({\n      query: adress\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"contentMap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"searchAdress\",\n    onChange: takeAdress,\n    style: {\n      cursor: 'pointer'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"takeAdress\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"contentResult\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, results.length && results.map(result => React.createElement(\"div\", {\n    className: \"contentAdress\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"resultAdress\",\n    onClick: putMarker,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, result.label))), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, posStart), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, posEnd)), React.createElement(LeafletMap, {\n    className: \"contentMapping\",\n    onClick: onMapClick,\n    center: pos,\n    zoom: zooming,\n    maxZoom: 19,\n    attributionControl: true,\n    zoomControl: true,\n    doubleClickZoom: true,\n    scrollWheelZoom: true,\n    dragging: true,\n    animate: true,\n    easeLinearity: 0.35,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(TileLayer, {\n    url: \"http://{s}.tile.osm.org/{z}/{x}/{y}.png\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), validPosition === 1 ? React.createElement(Marker, {\n    className: \"marker\",\n    position: posStart,\n    style: \"width: 50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Popup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"Demande de livraison\", React.createElement(\"a\", {\n    className: \"buttonAnnouncement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \" voir annonce\"))) : validPosition === 2 ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(Marker, {\n    className: \"marker\",\n    position: posStart,\n    style: \"width: 50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(Popup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Demande de livraison\", React.createElement(\"a\", {\n    className: \"buttonAnnouncement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, \" voir annonce\"))), React.createElement(Marker, {\n    src: require(\"./image/markerEnd.png\"),\n    className: \"markerEnd\",\n    position: pos,\n    style: \"width: 50px\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(Popup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"Demande de livraison\", React.createElement(\"a\", {\n    className: \"buttonAnnouncement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \" voir annonce\")))) : null), validPosition === 1 ? React.createElement(\"div\", {\n    className: \"divEnterAdressMapClient\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"messageMap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Placez votre point de d\\xE9part\"), React.createElement(\"button\", {\n    className: \"validPos\",\n    onClick: validPos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Valider point de d\\xE9part\")) : adressEnter === 1 ? React.createElement(\"div\", {\n    className: \"divEnterAdressMapClient\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"messageMap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"\\xE9crivez cette adresse\"), React.createElement(\"input\", {\n    className: \"enterAdressMapClient\",\n    placeholder: \"entrer addresse de d\\xE9part\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"validAdressMapClient\",\n    onClick: validEnter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, \"valider\")) : validPosition === 2 ? React.createElement(\"div\", {\n    className: \"divEnterAdressMapClient\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"messageMap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Placez votre point d'arriv\\xE9\"), React.createElement(\"button\", {\n    className: \"validPos\",\n    onClick: validPos,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, \"Valider point d'arriv\\xE9\")) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"messageMap\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"\\xE9crivez cette adresse\"), React.createElement(\"input\", {\n    className: \"enterAdressMapClient\",\n    placeholder: \"entrer addresse d'arriv\\xE9'\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"validAdressMapClient\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, \"valider\")));\n};\n\nexport default MappingClient;","map":{"version":3,"sources":["/home/thomas/Map-interactive/src/components/MakeRepere.js"],"names":["React","useState","useEffect","Map","LeafletMap","TileLayer","Marker","Popup","OpenStreetMapProvider","MappingClient","results","setResults","pos","setPos","posStart","setPosStart","posEnd","setPosEnd","provider","zooming","setZooming","inputValue","setInputValue","validPosition","setValidPosition","adressEnter","setAdressEnter","validPos","console","log","validEnter","takeAdress","event","preventDefault","currentTarget","value","result","giveMeCoords","resultFr","filter","res","y","x","onMapClick","e","position","latlng","lat","lng","putMarker","adress","target","innerHTML","coords","setTimeout","raw","type","search","query","cursor","length","map","label","require"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Map as LeafletMap, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\nimport './Mak.css'\n\nconst MappingClient = () => {\n    const [results, setResults] = useState({})\n    const [pos, setPos] = useState([47.9027336, 1.9086066])\n    const [posStart, setPosStart] = useState([47.9027336, 1.9086066])\n    const [posEnd, setPosEnd] = useState([47.9027336, 1.9086066])\n    const provider = new OpenStreetMapProvider();\n    const [zooming, setZooming] = useState(6)\n    const [inputValue, setInputValue] = useState(\"\")\n    const [validPosition, setValidPosition] = useState(1)\n    const [adressEnter, setAdressEnter] = useState(0)\n\n    const validPos = () => {\n      setAdressEnter(adressEnter+1)\n      setValidPosition(null)\n      console.log(adressEnter)\n    }\n\n    const validEnter = () => {\n      setValidPosition(2)\n      setAdressEnter(null)\n    }\n\n    const takeAdress = async (event) => {\n      event.preventDefault();\n      setInputValue(event.currentTarget[0].value);\n      const result = await giveMeCoords(inputValue);\n      const resultFr = result.filter(res => (++res.y > 42.5 && ++res.y < 51) && (++res.x < 8 && ++res.x > -5))\n\n      setResults(resultFr)\n    }\n\n    const onMapClick = async (e) => {\n      let position = [e.latlng.lat, e.latlng.lng]\n      setPos(position);\n      if(validPosition === 1){\n        setPosStart(position)\n      }\n      else if(validPosition === 2){\n        setPosEnd(position)\n      }\n    }\n\n    const putMarker = async (event) => {\n      event.preventDefault();\n      const adress = event.target.innerHTML;\n      const result = await giveMeCoords(adress);\n      const coords = [+result[0].y, +result[0].x]\n      setPos([...coords]);\n      setResults({})\n      await setTimeout(function() {\n        if(result[0].raw.type === \"city\"){\n          setZooming(14)\n        }\n        else if (result[0].raw.type){\n          setZooming(15)\n        }\n      }, 1500)\n    }\n\n\n\n    const giveMeCoords = async (adress) => {\n      // console.log(adress)\n      return await provider.search({ query: adress });\n    }\n\n    \n\n    return (\n      <div className=\"contentMap\">\n        <form className=\"searchAdress\" onChange={takeAdress} style={{cursor: 'pointer'}}>\n          <input className='takeAdress'/>\n        </form>\n\n        <div className=\"contentResult\">\n\n        {\n          (results.length &&\n            results.map(result =>\n            <div className=\"contentAdress\">\n              <p className=\"resultAdress\" onClick={putMarker}>{result.label}</p>\n            </div>))\n        }\n\n        <p>{posStart}</p>\n        <p>{posEnd}</p>\n\n        </div>\n        <LeafletMap className=\"contentMapping\" onClick={onMapClick}\n        center={pos}\n        zoom={zooming}\n        maxZoom={19}\n        attributionControl={true}\n        zoomControl={true}\n        doubleClickZoom={true}\n        scrollWheelZoom={true}\n        dragging={true}\n        animate={true}\n        easeLinearity={0.35}\n      >\n          \n        <TileLayer\n          url='http://{s}.tile.osm.org/{z}/{x}/{y}.png'\n        />\n        {validPosition === 1 ?\n        <Marker className=\"marker\" position={posStart} style=\"width: 50px\">\n          <Popup>\n            Demande de livraison \n            <a className=\"buttonAnnouncement\"> voir annonce</a>\n          </Popup>\n        </Marker>\n        : validPosition === 2 ?\n        <div>\n        <Marker className=\"marker\" position={posStart} style=\"width: 50px\">\n          <Popup>\n            Demande de livraison \n            <a className=\"buttonAnnouncement\"> voir annonce</a>\n          </Popup>\n        </Marker>\n        <Marker src={require(\"./image/markerEnd.png\")} className=\"markerEnd\" position={pos} style=\"width: 50px\">\n        <Popup>\n          Demande de livraison \n          <a className=\"buttonAnnouncement\"> voir annonce</a>\n        </Popup>\n      </Marker>\n      </div>\n      :\n      null\n      }\n\n        \n      \n      \n      </LeafletMap>\n      {validPosition === 1 ?\n      <div className=\"divEnterAdressMapClient\">\n      <p className=\"messageMap\">Placez votre point de départ</p>\n      <button className=\"validPos\" onClick={validPos}>Valider point de départ</button>\n      </div>\n      : adressEnter === 1 ?\n      <div className=\"divEnterAdressMapClient\">\n        <p className=\"messageMap\">écrivez cette adresse</p>\n        <input className=\"enterAdressMapClient\" placeholder=\"entrer addresse de départ\"/>\n        <button className=\"validAdressMapClient\" onClick={validEnter}>valider</button>\n      </div>\n      : validPosition === 2 ?\n      <div className=\"divEnterAdressMapClient\">\n        <p className=\"messageMap\">Placez votre point d'arrivé</p>\n        <button className=\"validPos\" onClick={validPos}>Valider point d'arrivé</button>\n      </div>\n      :\n      <div>\n        <p className=\"messageMap\">écrivez cette adresse</p>\n        <input className=\"enterAdressMapClient\" placeholder=\"entrer addresse d'arrivé'\"/>\n        <button className=\"validAdressMapClient\">valider</button>\n      </div>\n      }\n      </div>\n    )\n}\n\nexport default MappingClient;"]},"metadata":{},"sourceType":"module"}